<!DOCTYPE html>
<html>
<head>
    <title>Like Post App</title>
</head>
<body id="body">
  <!--
    <p id="message"></p>
    {% for post in posts %}
    <h3>{{ forloop.counter }}) {{ post.post_heading }}</h3>
    <p>{{ post.post_text }} </p>
    <a class="likebutton" id="like{{post.id}}" href="#" data-catid="{{ post.id }}">Like</a>
    {% endfor %}
  -->
      <div style=""background:yellow; font-size:30;""  id="m">
        {%for i in post %}
        <h1>Title:{{i.post_heading}}</h1>
          <textarea name="name" rows="8" cols="80" >Post:{{i.post_text}}</textarea>
        {% endfor %}
      </div>
      <div class="" id="result">
          <h1 id="h1"></h1>
          <textarea name="name" rows="8" cols="80" id="text" style="display:none;"></textarea>
      </div>
    <button type="button" name="button" onclick="more()">More</button>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.0/jquery.min.js"></script>
    <script type="text/javascript">
    $('.likebutton').click(function(){
    var catid;
    catid = $(this).attr("data-catid");
    $.ajax(
    {
        type:"GET",
        url: "/likepost",
        data:{
                 post_id: catid
        },
        success: function( data )
        {
            $( '#like'+ catid ).remove();
            $( '#message' ).text(data);
        }
     })
});

  function more(){
    $.ajax({
      url: '',

      contentType: 'application/json; charset=utf-8',
      dataType: 'json',
      success: function(x,y){
        title = (x["post_heading"])
        text =  (x["post_text"])

          document.querySelector('#h1').innerHTML = ` ${title} `;
          document.querySelector('#text').innerHTML = ` ${text} `;
          document.querySelector('#text').style.display = "block";
          console.log(y)
        }
      })
  };
</script>
</body>
</html>
